<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5CDP19RY2Z"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-5CDP19RY2Z');
    </script>
    <meta content="Marco Polo Research Lab" name="author"/>
    <link href="https://allergy.mprlab.com/" rel="canonical"/>
    <meta content="index,follow" name="robots"/>
    <meta
        content="Interactive allergy-learning game where kids pick food allergens, spin the wheel to win hearts, and discover dishes that match their choices."
        name="description"
    />

    <!-- Inline PNG “allergy wheel” favicon -->
    <link href="data:image/png;base64,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" rel="icon" type="image/png"/>
    <link href="data:image/png;base64,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" rel="shortcut icon" type="image/png"/>

    <title>Allergy Wheel – Learn Food Allergens Through Play</title>
    <meta content="width=device-width, initial-scale=1, viewport-fit=cover" name="viewport"/>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/main.css">

</head>

<body data-screen="allergy">
<header>
    <div class="header-left">
        <div class="avatar-menu-wrapper">
            <button aria-expanded="false" aria-haspopup="true" class="avatar-button" id="avatar-toggle" type="button"></button>
            <div aria-hidden="true" class="avatar-menu-backdrop" id="avatar-menu-backdrop" hidden></div>
            <div class="avatar-menu" id="avatar-menu" hidden></div>
        </div>
        <div class="aw-header-title-group">
            <h1>Allergy Wheel – Learn Food Allergens Through Play</h1>
        </div>
        <div class="aw-bottombar">
            <div aria-label="Select a view" class="header-nav" role="group">
                <button
                    aria-pressed="true"
                    class="ghost"
                    id="nav-game"
                    type="button"
                >
                    Game
                </button>
                <button
                    aria-pressed="false"
                    class="ghost"
                    id="nav-menu"
                    type="button"
                >
                    Menu
                </button>
            </div>
        </div>
    </div>
    <div class="header-right">
        <div class="aw-hearts-container">
            <div aria-live="polite" class="hearts" data-count="0" id="hearts-bar" aria-label="0 hearts" title="0 hearts">
                <span class="heart-count">0</span>
                <span aria-hidden="true" class="heart-icons"></span>
            </div>
        </div>
        <div class="aw-header-controls">
            <button class="ghost" id="fs">Full Screen</button>
            <button type="button" class="ghost" id="mute" aria-pressed="false" aria-label="Mute audio">Mute</button>
        </div>
    </div>
</header>

<!-- Allergy selection -->
<main id="screen-allergy">
    <div class="card">
        <div class="card__body">
            <h2 class="title" id="allergy-title">Pick your allergens</h2>
            <p class="muted">Choose anything that might cause trouble. You can change this later.</p>
            <p class="muted">Spin the allergy wheel to win 10 hearts!</p>
            <div class="grid allergen-grid" id="allergy-list">
                <button
                    aria-disabled="true"
                    class="btn primary start-button"
                    data-blocked="true"
                    id="start"
                    type="button"
                >
                    <span aria-hidden="true" class="start-button__icon">
                        <img alt="" src="assets/icons/spinning-wheel.svg"/>
                    </span>
                    Spin the Wheel
                </button>
            </div>
        </div>
        <div class="actions card__actions">
            <div class="card-actions__status">
                <p class="muted" id="loading">Loading data…</p>
                <p class="muted" hidden id="load-error">Could not load data. Check JSON paths.</p>
            </div>
        </div>
    </div>
</main>

<!-- Wheel -->
<main id="screen-wheel">
    <div class="wheel-wrap">
        <canvas aria-label="Spinning dish wheel" height="1000" id="wheel" width="1000"></canvas>
        <!-- wheel control cluster; JS toggles .is-stop <-> .is-start on the main button -->
        <div class="wheel-control" data-wheel-control-mode="start" id="wheel-control">
            <button class="wheel-control__continue btn action is-start" id="wheel-continue" type="button">
                <span class="wheel-control__label wheel-control__label--spin">SPIN</span>
                <span class="wheel-control__label wheel-control__label--stop">STOP</span>
            </button>
            <div
                aria-hidden="false"
                class="wheel-control__restart"
                id="wheel-restart"
                role="button"
                tabindex="0"
            >
                Restart
            </div>
        </div>
    </div>
    <div class="status">Allergens: <span id="sel-badges"></span></div>
    <div
        aria-hidden="true"
        class="restart-modal"
        hidden
        id="restart-confirmation"
    >
        <div class="restart-modal__overlay" id="restart-confirmation-overlay"></div>
        <div
            aria-describedby="restart-confirmation-description"
            aria-labelledby="restart-confirmation-title"
            aria-modal="true"
            class="restart-modal__dialog"
            id="restart-confirmation-dialog"
            role="dialog"
            tabindex="-1"
        >
            <h2 class="restart-modal__title" id="restart-confirmation-title">Restart the game?</h2>
            <p class="restart-modal__message" id="restart-confirmation-description">
                Are you sure you want to restart? Your current progress will be lost.
            </p>
            <div class="restart-modal__actions">
                <button class="btn danger restart-modal__confirm" id="restart-confirmation-confirm" type="button">
                    Yes, restart
                </button>
                <button class="ghost restart-modal__cancel" id="restart-confirmation-cancel" type="button">
                    Continue playing
                </button>
            </div>
        </div>
    </div>
</main>

<!-- Menu -->
<section aria-hidden="true" aria-labelledby="menu-title" id="screen-menu">
    <div class="menu-card">
        <div class="menu-card__header">
            <h2 class="title" id="menu-title">Global Allergy-Friendly Menu</h2>
            <p class="muted">Browse every dish from the wheel with its colorful story.</p>
        </div>
        <div class="menu-table-wrapper">
            <table aria-describedby="menu-title" class="menu-table">
                <thead>
                    <tr>
                        <th scope="col">Dish</th>
                        <th scope="col">
                            <div class="menu-header-cell">
                                <button
                                    aria-controls="menu-ingredient-filter-panel"
                                    aria-expanded="false"
                                    aria-haspopup="true"
                                    class="menu-header-toggle"
                                    id="menu-ingredient-filter-toggle"
                                    type="button"
                                >
                                    Ingredients
                                </button>
                                <div
                                    aria-label="Filter ingredients"
                                    class="menu-filter-panel"
                                    hidden
                                    id="menu-ingredient-filter-panel"
                                    role="group"
                                >
                                    <div class="menu-filter-header">
                                        <p class="menu-filter-title">Filter by ingredient</p>
                                        <button
                                            aria-disabled="true"
                                            class="menu-filter-clear"
                                            id="menu-ingredient-filter-clear"
                                            type="button"
                                        >
                                            Clear
                                        </button>
                                    </div>
                                    <div class="menu-filter-list" id="menu-ingredient-filter-list"></div>
                                </div>
                            </div>
                        </th>
                        <th scope="col">
                            <div class="menu-header-cell">
                                <button
                                    aria-controls="menu-cuisine-filter-panel"
                                    aria-expanded="false"
                                    aria-haspopup="true"
                                    class="menu-header-toggle"
                                    id="menu-cuisine-filter-toggle"
                                    type="button"
                                >
                                    Cuisine
                                </button>
                                <div
                                    aria-label="Filter cuisines"
                                    class="menu-filter-panel"
                                    hidden
                                    id="menu-cuisine-filter-panel"
                                    role="group"
                                >
                                    <div class="menu-filter-header">
                                        <p class="menu-filter-title">Filter by cuisine</p>
                                        <button
                                            aria-disabled="true"
                                            class="menu-filter-clear"
                                            id="menu-cuisine-filter-clear"
                                            type="button"
                                        >
                                            Clear
                                        </button>
                                    </div>
                                    <div class="menu-filter-list" id="menu-cuisine-filter-list"></div>
                                </div>
                            </div>
                        </th>
                        <th scope="col">Story</th>
                    </tr>
                </thead>
                <tbody id="menu-table-body"></tbody>
            </table>
        </div>
    </div>
</section>

<!-- Reveal -->
<section aria-hidden="true" aria-labelledby="dish-title" aria-modal="true" id="reveal" role="dialog">
    <div class="reveal-card">
        <div class="row">
            <h3 class="title" id="dish-title" style="margin:0"></h3>
            <span class="tag" id="dish-cuisine"></span>
        </div>
        <div class="banner ok" id="result">
            <svg class="face" hidden id="face" viewBox="0 0 100 100">
                <circle cx="50" cy="50" fill="#ffd1dc" r="45" stroke="#000" stroke-width="4"/>
                <circle cx="35" cy="40" r="6"/>
                <circle cx="65" cy="40" r="6"/>
                <ellipse cx="50" cy="65" fill="#ff9eb3" rx="22" ry="14" stroke="#000" stroke-width="4"/>
            </svg>
            <div id="result-text" style="font-weight:900"></div>
        </div>
        <div class="ingredients" id="dish-ingredients"></div>
        <div class="actions" style="text-align:right">
            <button class="btn primary" id="again">Spin Again</button>
        </div>
    </div>
</section>

<section aria-hidden="true" aria-labelledby="gameover-title" aria-modal="true" id="gameover" role="dialog">
    <div class="reveal-card" style="text-align:center">
        <h3 class="title" id="gameover-title" style="margin:0 0 6px 0">Game Over</h3>
        <p class="muted" style="margin:0 0 16px 0">You ran out of hearts. Want to try again?</p>
        <div class="actions" style="display:flex; gap:10px; justify-content:center">
            <button class="btn primary" id="restart">Restart</button>
        </div>
    </div>
</section>

<script src="js/core/app.js" type="module"></script>
</body>
</html>
